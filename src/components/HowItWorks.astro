---
import { Icon } from "astro-icon/components";

const steps = [
    {
        number: "01",
        title: "Sign up",
        desc: "Create your profile and tell us what you're looking for in a room or roommate.",
        icon: "ph:user-plus-fill",
    },
    {
        number: "02",
        title: "Find Your Match",
        desc: "Browse verified listings and use our AI to find roommates who match your vibe.",
        icon: "ph:house-fill",
    },
    {
        number: "03",
        title: "Chat & Connect",
        desc: "Connect safely through our app, schedule a tour, and move in stress-free.",
        icon: "ph:chat-circle-dots-fill",
    },
];
---

<section class="how-it-works section">
    <div class="container">
        <!-- Section Header -->
        <div class="section-header" data-animate="fade-up">
            <span class="badge badge-pink">Simple Process</span>
            <h2 class="section-title">Explore Our App</h2>
            <p class="section-subtitle">
                Find your perfect spot in just three simple steps.
            </p>
        </div>

        <!-- Steps Container -->
        <div class="steps-container">
            <!-- Curved Line SVG (Decorative) -->
            <div class="steps-line">
                <svg
                    width="100%"
                    height="100"
                    viewBox="0 0 1000 100"
                    preserveAspectRatio="none"
                >
                    <path
                        d="M0,50 C250,100 250,0 500,50 C750,100 750,0 1000,50"
                        fill="none"
                        stroke="var(--color-pink-light)"
                        stroke-width="2"
                        stroke-dasharray="8 8"
                        opacity="0.5"></path>
                </svg>
            </div>

            <div class="steps-grid">
                {
                    steps.map((step, i) => (
                        <div
                            class="step-item"
                            data-animate="fade-up"
                            data-delay={i + 1}
                        >
                            <div class="step-icon-wrapper">
                                <div class="step-icon">
                                    <Icon name={step.icon} size={32} />
                                </div>
                                <div class="step-number">{step.number}</div>
                            </div>
                            <h3 class="step-title">{step.title}</h3>
                            <p class="step-desc">{step.desc}</p>
                        </div>
                    ))
                }
            </div>
        </div>
    </div>
</section>

<style>
    .how-it-works {
        background: var(--color-white);
        padding-top: 80px;
    }

    .badge {
        margin-bottom: 16px;
    }

    .steps-container {
        position: relative;
        padding: 40px 0;
        margin-top: 40px;
    }

    .steps-line {
        position: absolute;
        top: 60px;
        left: 10%;
        right: 10%;
        height: 100px;
        z-index: 0;
        pointer-events: none;
    }

    .steps-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 40px;
        position: relative;
        z-index: 1;
    }

    .step-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        transition: transform 0.3s ease;
    }

    .step-item:hover {
        transform: translateY(-5px);
    }

    .step-icon-wrapper {
        position: relative;
        margin-bottom: 24px;
        width: 100px;
        height: 100px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--color-white);
        border-radius: 50%;
        box-shadow: var(--shadow-lg);
        z-index: 1;
    }

    .step-icon {
        width: 40px;
        height: 40px;
        color: var(--color-pink-primary);
    }

    .step-icon :global(svg) {
        width: 100%;
        height: 100%;
    }

    .step-number {
        position: absolute;
        top: 0;
        right: 0;
        width: 28px;
        height: 28px;
        background: var(--color-dark);
        color: white;
        border-radius: 50%;
        font-size: 12px;
        font-weight: 700;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid white;
    }

    .step-title {
        font-size: 1.25rem;
        font-weight: 700;
        margin-bottom: 12px;
        color: var(--text-primary);
    }

    .step-desc {
        font-size: 0.95rem;
        color: var(--text-secondary);
        line-height: 1.6;
        max-width: 300px;
    }

    @media (max-width: 900px) {
        .steps-grid {
            grid-template-columns: 1fr;
            gap: 60px;
        }

        .steps-line {
            display: none;
        }
    }
</style>
